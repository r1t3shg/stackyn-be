# Stackyn Folder Structure

Complete folder structure for Stackyn deployment.

```
/opt/stackyn
├── traefik/                 # Infrastructure (entrypoint)
│   ├── traefik.yml          # Static config
│   ├── dynamic/             # File provider configs
│   │   ├── routers.yml      # Routing rules
│   │   ├── middlewares.yml  # Middleware definitions
│   │   └── services.yml     # Backend service definitions
│   ├── acme/                # Let's Encrypt certs
│   │   └── acme.json        # Auto-generated by Traefik
│   └── README.md            # Traefik documentation
│
├── frontend/                 # React (Vite) UI
│   ├── Dockerfile           # Frontend build and serve
│   ├── src/                 # Source code
│   │   ├── pages/          # Page components
│   │   ├── components/     # React components
│   │   ├── lib/            # Utilities
│   │   ├── App.tsx         # Main app
│   │   └── main.tsx        # Entry point
│   ├── public/             # Static assets
│   ├── dist/               # Built static files (generated)
│   ├── package.json
│   ├── vite.config.ts
│   └── README.md
│
├── backend/                 # Go API
│   ├── Dockerfile          # Backend build
│   ├── cmd/                # Application entry points
│   │   ├── api/            # API server
│   │   └── worker/         # Background worker
│   ├── internal/           # Internal packages
│   ├── config/             # Configuration files
│   │   ├── prod.env        # Production environment (not in git)
│   │   └── prod.env.example # Example config
│   ├── go.mod
│   ├── go.sum
│   └── README.md
│
├── apps/                    # USER DEPLOYED APPS (core of Stackyn)
│   ├── app-001/            # Example deployed app
│   │   ├── docker-compose.yml
│   │   ├── env/            # App environment variables
│   │   └── data/           # App-specific data
│   ├── app-002/
│   └── README.md           # Apps documentation
│
├── volumes/                 # Shared persistent volumes
│   ├── db/                 # PostgreSQL data
│   ├── redis/              # Redis data (if used)
│   ├── logs/               # Application logs
│   └── README.md           # Volumes documentation
│
├── docker-compose.yml       # Root orchestrator
├── README.md                # Main documentation
├── SETUP.md                 # Setup guide
├── STRUCTURE.md             # This file
└── .gitignore              # Git ignore rules
```

## Directory Descriptions

### traefik/
Traefik reverse proxy configuration:
- **traefik.yml**: Static configuration (entrypoints, providers, ACME)
- **dynamic/**: Dynamic configuration files (routers, services, middlewares)
- **acme/**: Let's Encrypt SSL certificates (auto-generated)

### frontend/
React frontend application:
- **src/**: Source code
- **dist/**: Built static files (generated by build)
- **Dockerfile**: Builds and serves the frontend

### backend/
Go backend API:
- **cmd/**: Application entry points
- **internal/**: Internal Go packages
- **config/**: Configuration files
- **Dockerfile**: Builds the Go binaries

### apps/
User-deployed applications:
- Each app gets its own subdirectory
- Contains app-specific docker-compose.yml
- Isolated environment and data

### volumes/
Persistent data storage:
- **db/**: PostgreSQL database files
- **logs/**: Application logs
- **redis/**: Redis data (if used)

## File Permissions

Important file permissions:

```bash
# Traefik ACME file
chmod 600 traefik/acme/acme.json

# Backend config (if contains secrets)
chmod 600 backend/config/prod.env

# Volumes
chown -R 999:999 volumes/db      # PostgreSQL
chown -R $USER:$USER volumes/logs # Logs
```

## Git Ignore

The following are ignored by git:
- `traefik/acme/acme.json` (SSL certificates)
- `backend/config/prod.env` (secrets)
- `frontend/dist/` (build output)
- `volumes/` (data files)
- `apps/*/` (user apps, optional)

## Creating the Structure

To create this structure:

```bash
mkdir -p /opt/stackyn/{traefik/{dynamic,acme},frontend/src,backend/config,apps,volumes/{db,redis,logs}}
touch traefik/acme/acme.json
chmod 600 traefik/acme/acme.json
```

