# Traefik Dynamic Router Configuration
# This file defines routing rules for services

http:
  routers:
    # Frontend Router
    frontend:
      rule: "Host(`stackyn.local`) || Host(`staging.stackyn.com`)"
      entryPoints:
        - websecure
      service: frontend
      tls:
        certResolver: letsencrypt
      middlewares:
        - frontend-headers

    # Backend API Router
    backend:
      rule: "Host(`api.stackyn.local`) || Host(`api.staging.stackyn.com`)"
      entryPoints:
        - websecure
      service: backend
      tls:
        certResolver: letsencrypt
      middlewares:
        - cors
        - backend-headers

